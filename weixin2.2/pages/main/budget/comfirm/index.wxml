<!--pages/main/budget/index/index.wxml-->
<view class='containers'>
  <view class='nav'>
     <scroll-view class='menus' scroll-x scroll-into-view="{{toMenuView}}" style='width:{{windowWidth}}px;'>  
      <view class='item' id="item{{item.id}}" data-id="{{item.id}}" wx:for="{{xcList}}" wx:key="{{index}}" bindtap='getCurrentMenuData'>
        <view class='item-wrap'>
          <image src='{{item.icon}}'></image>
          <text class="{{currentMenu == item.id?'on':''}}">{{item.title}}</text>
        </view>
      </view>
    </scroll-view> 
    <scroll-view class='menu-sub' scroll-into-view="{{toMenuSubView}}" scroll-x="{{true}}" style='width:{{windowWidth}}px;'>
      <view class='item' id="subitem{{item.id}}" data-id="{{item.id}}" wx:for="{{menuList}}" wx:key="{{index}}" bindtap='getCurrentSubMenuData'>
        <text class="{{currentSubMenu == item.id?'on':''}}">{{item.title}}</text>
      </view>
    </scroll-view> 
  </view>

  <view class='xuancai-wrap'>
    <view class='x-header'>
      <view class='main'>
      <view class="add-btn" catchtap="selectAll">
          <icon type="{{item.checked ? 'success' : 'circle'}}"  size="18" color="#ff6600"></icon>
        </view>
        <text>瓷砖</text>
      </view>
      <view class='action' wx:if="{{!isManager}}">
        <view class='ac' bindtap="addItem"><image src="{{addIcon}}"></image>新增</view>
        <view class='ac' bindtap='openManager'><image src="{{managerIcon}}"></image>管理</view>
        <view class='switch'>
          <view class="tab {{switchType == 1?'on':''}}" data-type="1" bindtap='getSwitchType'>线上</view>
          <view class="tab {{switchType == 2?'on':''}}" data-type="2" bindtap='getSwitchType'>扫码</view>
        </view>
      </view>
      <view class='action' wx:else>
        <view class='acs cart' bindtap='goToselfBuy'><image src="{{cartIcon}}"></image>自购</view>
        <view class='acs dell' bindtap='dellItem'><image src="{{dellIcon}}"></image>删除</view>
        <view class='cance' bindtap='canceManager'>取消管理</view>
      </view>
    </view>

    <scroll-view class='list' scroll-y="{{true}}">
      <view class='item' wx:for="{{attrList}}" wx:key="{{index}}" data-id="{{item.id}}" bindtap='gotoPage'>
        <view class="add-btn" catchtap="select" data-dish="{{item.id}}" data-index="{{index}}">
          <icon type="{{item.checked ? 'success' : 'circle'}}"  size="18" color="#ff6600"></icon>
        </view>
        <view class='name'>{{item.name}}</view>
        <view class='price'>{{item.price}}元</view>
        <view class='opbox'>
          <block wx:if="{{switchType == 1}}">
            <view class='btn'>线上选材</view>
          </block>
          <block wx:else>
            <view class='sys'><image src='{{sysIcon}}'></image></view>
          </block>
          <view class='right'><image src="{{rightIcon}}"></image></view>
        </view>
    </view>
    </scroll-view>
  </view>

  <view class='footer'>
    <view class='map'>
      <image src='{{mapIcon}}'></image>
      <text>路线图</text>
    </view>
    <view class='total'>
      <text>合计：{{sumPrice}}元</text>
      <navigator url='/pages/main/budget/bill/index' wx:if="{{!isManager}}">确定生成</navigator>
      <view wx:else>确定生成</view>
    </view>
  </view>
</view>

<!-- 新增弹窗 -->
<view hidden='{{hiddenModal}}'>
  <add-item bindcustomevent="actionModal"></add-item>  
</view>

<!-- 提示弹窗 -->
<view hidden="{{hiddenZdyModal}}">
<zdy-modal content="{{modalContent}}" bindcustomevent="actionZdyModal"></zdy-modal>
</view>
